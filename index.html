<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
	<div id="app"></div>
	<script src="./core/core.js"></script>
	<script>
		var Http = (function() {
			function Http(Cvtsp, opts) {
				this.xhr = 'hello';
				Cvtsp.prototype.http = Cvtsp.http = function() {
					console.log('what')
				}
			};
			return Http;
		})();
	</script>
	<script>
		// **本次要解决slot 和 Component动态组件
		var ElButton = (function(_Cvtsp) {
			Cvtsp.inherits(ElButton, _Cvtsp);
			ElButton.defaultProps = {
				title: 'hello world',
				height: 200
			}
			function ElButton() {
				var _this = Cvtsp.possibleConstructorReturn(this, _Cvtsp.apply(this, arguments));
				_this.data = {
					plateCode: '皖A3301'
				}
			}

			ElButton.prototype.template = function() {
				return `
					<button @click="handlerClick">
						<slot></slot>
					</button>
				`
			}

			ElButton.prototype.handlerClick = function() {
				this.emit('node-click');
			}

			return ElButton;
		})(Cvtsp);
		Cvtsp.registerComponent('ElButton', ElButton);

		// 入口组件
		var App = (function(_Cvtsp) {
			Cvtsp.inherits(App, _Cvtsp);
			function App() {
				var _this = Cvtsp.possibleConstructorReturn(this, _Cvtsp.apply(this, arguments));
				this.data = {
					name: 'wukangjun',
					age: 18,
					height: 180,
					lists: [1, 2, 3],
					name1: 'ElButton'
				}
			}

			App.prototype.template = function() {
				return `
					<div @click="haha">{{name}}</div>
					<Component :is="name1">hello</Component>
					<ElButton :title="height" @node-click="aa">搜索</ElButton>
				`
			}

			App.prototype.haha = function(event) {
				this.name1 = '';
			}

			App.prototype.aa = function() {
				console.log(this)
			}
			return App;
		})(Cvtsp);
		Cvtsp.registerComponent('App', App);

		// 一切从这开始 1. 
		Cvtsp.use(Http);
		Cvtsp.render('App', document.getElementById('app'));
	</script>
</body>
</html>